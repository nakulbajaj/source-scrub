<!--  
  * Author: Nakul Bajaj & Kevin Chang
  * Halderman Lab
  *
  * ,,,,,,,,,,,                 ,,,,,,,,,,,
  * ,,,,,,,,,,,,,             ,,,,,,,,,,,,,
  * ,,,,,,,,,,,,,,,         ,,,,,,,,,,,,,,,
  * ,,,,,,,,,,,,,,,,,     ,,,,,,,,,,,,,,,,,
  *    ,,,,,,,,,,,,,,,, ,,,,,,,,,,,,,,,,   
  *    ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,   
  *    ,,,,,,,,  ,,,,,,,,,,,,,  ,,,,,,,,   
  *    ,,,,,,,,    ,,,,,,,,,    ,,,,,,,,   
  *    ,,,,,,,,      ,,,,,      ,,,,,,,,   
  * ,,,,,,,,,,,,,,,    ,    ,,,,,,,,,,,,,,,
  * ,,,,,,,,,,,,,,,         ,,,,,,,,,,,,,,,
  * ,,,,,,,,,,,,,,,         ,,,,,,,,,,,,,,,
  * 
  *   University of Michigan â€“ Est. 1817
  *
-->

<!DOCTYPE html>
<!doctype html>
<html lang="en">

	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<script src="scrub.js"></script>
		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
		<link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;1,100;1,200;1,300;1,400;1,500;1,600&display=swap" rel="stylesheet">
		<title>Personal Data Scrubber</title>
	</head>

	<body onload="changeOutputDisplay('none');">

		<div style="height: 30px; background-color: #163D74">
			<p style="color: #FFFFFF; font-weight:200; vertical-align: middle; margin:0px; text-align: center; padding-top: 3px"> <img src="https://brand.umich.edu/assets/brand/style-guide/logo-guidelines/Block_M-Hex.png" height="15px" style="padding-right: 10px;"> A project by the University of Michigan, <a href='https://www.eecs.umich.edu/security/' style="color: #FFFFFF; text-decoration: underline;"> Center for Computer Security and Society (C2S2) </a></p>
		</div>

		<style type="text/css">
			body {color: #0f2951 !important; font-family: 'Public Sans', sans-serif; .btn-primary {background-color: #163d74;}} /* Adding !important forces the browser to overwrite the default style applied by Bootstrap */
		</style>

		<div class="py-5 text-center">
			<h2><b> Personal Data Scrubber </b></h2>
			<h4> Online Voter Registration Project</h4>
		</div>

		<div class="container">
			<h5> Why use this tool? <span style="font-weight: 200;"> &nbsp; Your voter registration session likely contains personal information, such as your name, voter ID, and other identifiers that you entered or that appear in your voter record. This tool helps you remove that information from the recorded session file (HAR file) before you send the file to us. </span></h5>
			<h5> How does the tool work? <span style="font-weight: 200;"> &nbsp; It works by searching for each personal field and replacing it with a placeholder. This tool runs entirely on your computer, and doesn't send any information to us.  All fields are optional, and should be filled based on whether the information was required while registering to vote. </span></h5>
			<h5> How can I assure my information is safe? <span style="font-weight: 200;"> &nbsp; You are encouraged to turn off your internet connection after loading this tool. This prevents any data from leaving your computer (including from malicious 3rd party malware) while you use this site. You can also choose to search for and delete personal data in the downloaded scrubbed file yourself.</span></h5>
		</div>

		<div class="container" style="border-top-style: solid; padding-top: 10px">
			<legend>Original File:</legend>
			<div class="form-group row">
				<label class="col-sm-2 col-form-label">HAR file</label>
				<div class="col-sm-10 custom-file">
					<input id="sourceInput" type="file" class="form-control custom-file-input" onchange="reset()">
					<label id="sourceFilename" class="custom-file-label" >No file selected</label>
				</div>
			</div>
		</div>

		<div class="container" style="border-top-style: solid; padding-top: 10px">
			<legend>Contact Information:</legend>
			<div class="form-group row">
				<label  class="col-sm-2 col-form-label">
				Name
				</label>
				<div class="col-sm-4">
					<input id="first_name" type="text" class="form-control" placeholder="First" onchange="reset()">
				</div>
				<div class="col-sm-2">
					<input id="middle_name" type="text" class="form-control" placeholder="Middle" onchange="reset()">
				</div>
				<div class="col-sm-4">
					<input id="last_name" type="text" class="form-control" placeholder="Last" onchange="reset()">
				</div>
			</div>

			<div class="form-group row">
				<label class="col-sm-2 col-form-label">
				Email
				</label>
				<div class="col-sm-10">
					<input id="email"  type="email" class="form-control" placeholder="name@example.com" onchange="reset()">
				</div>
			</div>

			<div class="form-group row">
				<label  class="col-sm-2 col-form-label">
				Address
				</label>
				<div class="col-sm-5">
					<input id="street_address" type="text" class="form-control" placeholder="Street" onchange="reset()">
				</div>
				<div class="col-sm-3">
					<input id="city_address" type="text" class="form-control" placeholder="City" onchange="reset()">
				</div>
				<div class="col-sm-2">
					<input id="zip_address" type="text" class="form-control" placeholder="Zip" onchange="reset()">
				</div>
			</div>

			<div class="form-group row">
				<label  class="col-sm-2 col-form-label">
				Phone
				</label>
				<div class="col-sm-3">
					<input id="areacode_phone" type="text" class="form-control" placeholder="123" onchange="reset()">
				</div>
				<div class="col-sm-3">
					<input id="centraloffice_phone" type="text" class="form-control" placeholder="456" onchange="reset()">
				</div>
				<div class="col-sm-4">
					<input id="subscribernumber_phone" type="text" class="form-control" placeholder="7890" onchange="reset()">
				</div>
			</div>
		</div>

		<div class="container" style="border-top-style: solid; padding-top: 10px">
			<legend>Private Identifiers:</legend>

			<div class="form-group row">
				<label  class="col-sm-2 col-form-label">
				Birth Year
				</label>
				<div class="col-sm-10">
					<input id="year_dob" type="text" class="form-control" placeholder="1970" onchange="reset()">
				</div>
			</div>

			<div class="form-group row">
				<label  class="col-sm-2 col-form-label">
				Last 4 SSN
				</label>
				<div class="col-sm-10">
					<input id="serialnumber_ssn" type="text" class="form-control" placeholder="1234" onchange="reset()">
				</div>
			</div>

			<div class="form-group row">
				<label  class="col-sm-2 col-form-label">
				Driver's License #
				</label>
				<div class="col-sm-10">
					<input id="driverID" type="text" class="form-control" placeholder="Z987654321" onchange="reset()">
				</div>
			</div>

			<div class="form-group row">
				<label  class="col-sm-2 col-form-label">
				Voter ID #
				</label>
				<div class="col-sm-10">
					<input id="voterID" type="text" class="form-control" placeholder="A123456789" onchange="reset()">
				</div>
			</div>
		</div>

		<div class="container" style="border-top-style: solid; padding-top: 10px">
			<legend>Miscellaneous:</legend>
			<div class="form-group row">
				<label  class="col-sm-2 col-form-label">
				Other Personal Information
				</label>
				<div class="col-sm-10">
					<textarea class="form-control" id="piiInput" onchange="reset()"></textarea>
					<small id="piiHelpBlock" class="form-text text-muted" style="color: #666666 !important;">
					Enter other sensitive information to search for and redact from the .har file. Separate each piece of data with a space.
					</small>
				</div>
			</div>
		</div>

		<div class="container" style="padding-bottom: 20px;">
			<div class="form-group row">
				<button id='scrubButton' type='button' class='btn btn-light btn-block' disabled='true' style="display: none;" onclick="scrub()"></button>				
			</div>
		</div>

		<div id="outputContainer" class="container" style="border-top-style: solid; padding-top: 10px">
			<legend id="outputLegend">Scrubbed File Preview:</legend>
			<div id="outputForm" class="form-group row">
					<div id="outputRow" class="col-sm-12">
						<small id="outputDescription" class="form-text text-muted" style="color: #666666 !important; padding-bottom: 10px">
						The scrubbed .har file to be downloaded without wesbite resources sent from the server to your computer.
						</small>
						<textarea id="outputText" class="form-control" rows=10 readonly='true'></textarea>
					</div>
			</div>
		</div>

	</body>

</html>